# 缓存穿透、雪崩、击穿

## 介绍

`缓存穿透`，`缓存雪崩`，`缓存击穿`三者都是请求透过缓存直接访问数据库，不同的是原因，缓存挂了导致的是雪崩，缓存过期导致的是击穿，恶意访问不存在数据导致的是穿透

缓存穿透又称缓存击穿，是指在高并发场景下缓存中（包括本地缓存和 redis 缓存）的某一个 key 被高并发的访问并没有命中，此时会去 db 中访问数据，导致数据库并发的执行大量查询操作，对 db 造成巨大压力。
解决方式：
1.对缓存失效的 key 加分布式锁，当一个 key 在本地缓存以及 redis 缓存中未查询到数据，此时对 key 加分布式锁访问 db，如果取到数据反写到缓存中，避免大量请求进入 db；如果取不到数据则缓存一个空对象，这样可以保证 db 不会被大量请求直接打挂，从而引起缓存颠簸，更甚者缓存雪崩效应。
2.在本地缓存一个 set 集合，存储对应数据为空的 key 的集合，在请求前做拦截，此种方式牵涉到数据变更还要校验 set 集合的问题，一般适用于数据更新较少的场景
3.使用布隆过滤器